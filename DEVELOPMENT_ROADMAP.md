# AI åŒ»ç–—è¯Šæ–­ç³»ç»Ÿ - åç»­å¼€å‘è®¡åˆ’

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**æœ€åæ›´æ–°**: 2025-12-09
**è´Ÿè´£äºº**: Development Team
**è§„åˆ’å‘¨æœŸ**: 2025 Q1 - Q4

---

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£è¯¦ç»†è§„åˆ’ AI åŒ»ç–—è¯Šæ–­ç³»ç»Ÿçš„åç»­å¼€å‘ä»»åŠ¡ï¼ŒåŒ…æ‹¬åŠŸèƒ½å¢å¼ºã€æ€§èƒ½ä¼˜åŒ–ã€æŠ€æœ¯å€ºåŠ¡æ¸…ç†å’Œé•¿æœŸæ¶æ„æ¼”è¿›ã€‚æ‰€æœ‰ä»»åŠ¡æŒ‰ä¼˜å…ˆçº§å’Œä¾èµ–å…³ç³»ç»„ç»‡ï¼Œå¹¶æ˜ç¡®æŠ€æœ¯å®ç°æ–¹æ¡ˆå’ŒéªŒæ”¶æ ‡å‡†ã€‚

---

## ğŸ¯ å¼€å‘ç›®æ ‡

### çŸ­æœŸç›®æ ‡ (Q1 2025)
1. **å®Œå–„æ ¸å¿ƒåŠŸèƒ½**ï¼šæå‡ç”¨æˆ·ä½“éªŒï¼Œä¿®å¤å·²çŸ¥é—®é¢˜
2. **æ€§èƒ½ä¼˜åŒ–**ï¼šå‡å°‘åŠ è½½æ—¶é—´ï¼Œæå‡å¹¶å‘å¤„ç†èƒ½åŠ›
3. **ç§»åŠ¨ç«¯æ”¯æŒ**ï¼šå®ç°å“åº”å¼è®¾è®¡ï¼Œæ”¯æŒå¹³æ¿å’Œæ‰‹æœºè®¿é—®
4. **æµ‹è¯•è¦†ç›–**ï¼šå•å…ƒæµ‹è¯•è¦†ç›–ç‡è¾¾åˆ° 70%

### ä¸­æœŸç›®æ ‡ (Q2-Q3 2025)
1. **æ™ºèƒ½åŒ–å¢å¼º**ï¼šå¤šæ¨¡æ€è¾“å…¥ã€æ™ºèƒ½é—®è¯Šã€è¯Šæ–­è§£é‡Šæ€§
2. **åä½œåŠŸèƒ½**ï¼šå¤šç”¨æˆ·è¯„è®ºã€ç—…ä¾‹åˆ†äº«ã€ä¸“å®¶ä¼šè¯Š
3. **æ•°æ®åˆ†æ**ï¼šè¯Šæ–­è´¨é‡åˆ†æã€ç”¨æˆ·è¡Œä¸ºåˆ†æã€ç³»ç»Ÿç›‘æ§
4. **å›½é™…åŒ–**ï¼šæ”¯æŒä¸­è‹±æ–‡åˆ‡æ¢ï¼Œæœ¬åœ°åŒ–ç•Œé¢

### é•¿æœŸç›®æ ‡ (Q4 2025+)
1. **å¹³å°åŒ–**ï¼šå¼€æ”¾ APIã€æ’ä»¶ç³»ç»Ÿã€å¤šç§Ÿæˆ·æ”¯æŒ
2. **ç§æœ‰åŒ–éƒ¨ç½²**ï¼šæ”¯æŒæœ¬åœ° LLM éƒ¨ç½²ï¼Œé™ä½ API ä¾èµ–
3. **AI èƒ½åŠ›å‡çº§**ï¼šè‡ªå®šä¹‰æ™ºèƒ½ä½“ã€çŸ¥è¯†åº“é›†æˆã€æŒç»­å­¦ä¹ 
4. **å•†ä¸šåŒ–æ¢ç´¢**ï¼šä¼ä¸šç‰ˆã€SaaS æœåŠ¡ã€å®šåˆ¶åŒ–å¼€å‘

---

## ğŸ—“ï¸ è¿­ä»£è§„åˆ’

### Sprint 1-2 (2 å‘¨) - ç”¨æˆ·ä½“éªŒä¼˜åŒ–
**æ—¶é—´**: 2025-01-06 ~ 2025-01-19
**ç›®æ ‡**: ä¿®å¤å·²çŸ¥ UI é—®é¢˜ï¼Œæå‡äº¤äº’æµç•…åº¦

### Sprint 3-4 (2 å‘¨) - æ€§èƒ½ä¼˜åŒ–
**æ—¶é—´**: 2025-01-20 ~ 2025-02-02
**ç›®æ ‡**: å‰åç«¯æ€§èƒ½ä¼˜åŒ–ï¼Œå‡å°‘åŠ è½½æ—¶é—´

### Sprint 5-6 (2 å‘¨) - ç§»åŠ¨ç«¯æ”¯æŒ
**æ—¶é—´**: 2025-02-03 ~ 2025-02-16
**ç›®æ ‡**: å“åº”å¼è®¾è®¡ï¼Œé€‚é…ç§»åŠ¨è®¾å¤‡

### Sprint 7-8 (2 å‘¨) - æµ‹è¯•ä¸è´¨é‡ä¿éšœ
**æ—¶é—´**: 2025-02-17 ~ 2025-03-02
**ç›®æ ‡**: ç¼–å†™æµ‹è¯•ç”¨ä¾‹ï¼Œæå‡ä»£ç è´¨é‡

---

## ğŸ“Š ä»»åŠ¡ä¼˜å…ˆçº§çŸ©é˜µ

| ä¼˜å…ˆçº§ | æ ‡å‡† | ç¤ºä¾‹ |
|--------|------|------|
| **P0 (ç´§æ€¥)** | é˜»å¡æ ¸å¿ƒåŠŸèƒ½ã€ä¸¥é‡ Bug | ç™»å½•å¤±è´¥ã€è¯Šæ–­æ— æ³•è¿è¡Œ |
| **P1 (é«˜)** | é‡è¦åŠŸèƒ½ç¼ºå¤±ã€æ€§èƒ½é—®é¢˜ | ç§»åŠ¨ç«¯é€‚é…ã€æ…¢æŸ¥è¯¢ä¼˜åŒ– |
| **P2 (ä¸­)** | ç”¨æˆ·ä½“éªŒæå‡ã€å¢å¼ºåŠŸèƒ½ | å¼•å¯¼æç¤ºã€å¿«æ·é”®æ”¯æŒ |
| **P3 (ä½)** | é”¦ä¸Šæ·»èŠ±åŠŸèƒ½ | ä¸»é¢˜åˆ‡æ¢ã€åŠ¨ç”»æ•ˆæœ |

---

## ğŸš€ Phase 1: ç”¨æˆ·ä½“éªŒä¼˜åŒ– (Sprint 1-2)

### 1.1 é¦–æ¬¡ç™»å½•å¼•å¯¼ (P1)
**ç”¨æˆ·æ•…äº‹**: ä½œä¸ºæ–°ç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›åœ¨é¦–æ¬¡ç™»å½•æ—¶çœ‹åˆ°åŠŸèƒ½å¼•å¯¼ï¼Œå¿«é€Ÿäº†è§£ç³»ç»Ÿä½¿ç”¨æ–¹æ³•ã€‚

**åŠŸèƒ½æè¿°**:
- æ¬¢è¿å¼¹çª—ï¼šä»‹ç»ç³»ç»Ÿæ ¸å¿ƒåŠŸèƒ½
- äº¤äº’å¼å¼•å¯¼ï¼šé€æ­¥é«˜äº®å…³é”®åŠŸèƒ½ï¼ˆåˆ›å»ºç—…ä¾‹â†’è¿è¡Œè¯Šæ–­â†’æŸ¥çœ‹ç»“æœâ†’å¯¼å‡ºæŠ¥å‘Šï¼‰
- å¯è·³è¿‡å’Œé‡æ–°è§‚çœ‹
- å¼•å¯¼å®Œæˆåæ ‡è®°ç”¨æˆ·çŠ¶æ€ï¼ˆ`localStorage`ï¼‰

**æŠ€æœ¯å®ç°**:
```typescript
// ä½¿ç”¨ react-joyride åº“å®ç°å¼•å¯¼
import Joyride from 'react-joyride';

const steps = [
  { target: '.create-case-btn', content: 'ç‚¹å‡»è¿™é‡Œåˆ›å»ºæ–°ç—…ä¾‹' },
  { target: '.diagnosis-btn', content: 'é€‰æ‹© AI æ¨¡å‹å¹¶å¼€å§‹è¯Šæ–­' },
  { target: '.diagnosis-result', content: 'æŸ¥çœ‹è¯¦ç»†çš„è¯Šæ–­æŠ¥å‘Š' },
  { target: '.export-btn', content: 'å¯¼å‡ºä¸º PDF æˆ– Word æ–‡æ¡£' }
];
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ–°æ³¨å†Œç”¨æˆ·é¦–æ¬¡ç™»å½•è‡ªåŠ¨æ˜¾ç¤ºå¼•å¯¼
- [ ] å¼•å¯¼æ”¯æŒè·³è¿‡ï¼Œä¸‹æ¬¡ç™»å½•ä¸å†æ˜¾ç¤º
- [ ] ç”¨æˆ·å¯åœ¨è®¾ç½®ä¸­é‡æ–°è§‚çœ‹å¼•å¯¼
- [ ] å¼•å¯¼ä¸å¹²æ‰°æ­£å¸¸æ“ä½œï¼ˆå¯ç‚¹å‡»é®ç½©å…³é—­ï¼‰

**é¢„è®¡å·¥æ—¶**: 2 äººæ—¥

---

### 1.2 è¯Šæ–­ç»“æœå¯¹æ¯”åŠŸèƒ½ (P1)
**ç”¨æˆ·æ•…äº‹**: ä½œä¸ºåŒ»å­¦ç ”ç©¶äººå‘˜ï¼Œæˆ‘å¸Œæœ›å¯¹æ¯”åŒä¸€ç—…ä¾‹åœ¨ä¸åŒæ¨¡å‹æˆ–ä¸åŒæ—¶é—´çš„è¯Šæ–­ç»“æœã€‚

**åŠŸèƒ½æè¿°**:
- åœ¨è¯Šæ–­å†å²é¡µé¢å‹¾é€‰ 2 æ¡è®°å½•
- ç‚¹å‡»"å¯¹æ¯”"æŒ‰é’®ï¼Œæ‰“å¼€å¯¹æ¯”è§†å›¾
- å¹¶æ’æ˜¾ç¤ºä¸¤æ¬¡è¯Šæ–­ç»“æœï¼ˆå·¦å³åˆ†æ ï¼‰
- é«˜äº®å·®å¼‚éƒ¨åˆ†ï¼ˆæ–‡æœ¬ diff ç®—æ³•ï¼‰
- æ”¯æŒåˆ‡æ¢å¯¹æ¯”å¯¹è±¡

**æŠ€æœ¯å®ç°**:
```typescript
// ä½¿ç”¨ react-diff-viewer å®ç°æ–‡æœ¬å¯¹æ¯”
import ReactDiffViewer from 'react-diff-viewer';

<ReactDiffViewer
  oldValue={diagnosis1.result}
  newValue={diagnosis2.result}
  splitView={true}
  showDiffOnly={false}
  leftTitle={`${diagnosis1.model_name} - ${diagnosis1.timestamp}`}
  rightTitle={`${diagnosis2.model_name} - ${diagnosis2.timestamp}`}
/>
```

**æ•°æ®ç»“æ„**:
```typescript
interface ComparisonView {
  diagnosis1: DiagnosisHistory;
  diagnosis2: DiagnosisHistory;
  differences: DiffResult[];
}
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ”¯æŒé€‰æ‹© 2 æ¡è¯Šæ–­è®°å½•è¿›è¡Œå¯¹æ¯”
- [ ] å¹¶æ’æ˜¾ç¤ºä¸¤æ¬¡è¯Šæ–­çš„å®Œæ•´å†…å®¹
- [ ] é«˜äº®æ˜¾ç¤ºæ–‡æœ¬å·®å¼‚ï¼ˆå¢åŠ /åˆ é™¤/ä¿®æ”¹ï¼‰
- [ ] æ”¯æŒå¯¼å‡ºå¯¹æ¯”ç»“æœï¼ˆPDFï¼‰

**é¢„è®¡å·¥æ—¶**: 3 äººæ—¥

---

### 1.3 æ™ºèƒ½æœç´¢å¢å¼º (P2)
**ç”¨æˆ·æ•…äº‹**: ä½œä¸ºç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›å¿«é€Ÿæ‰¾åˆ°ç‰¹å®šç—…ä¾‹ï¼Œæ”¯æŒæ¨¡ç³Šæœç´¢å’Œé«˜çº§ç­›é€‰ã€‚

**åŠŸèƒ½æè¿°**:
- å…¨å±€æœç´¢å¿«æ·é”®ï¼ˆCtrl/Cmd + Kï¼‰
- æ”¯æŒæœç´¢å†…å®¹ï¼šæ‚£è€…å§“åã€ä¸»è¯‰ã€è¯Šæ–­ç»“æœ
- å®æ—¶æœç´¢å»ºè®®ï¼ˆä¸‹æ‹‰æ˜¾ç¤ºåŒ¹é…ç»“æœï¼‰
- é«˜çº§ç­›é€‰ï¼šæŒ‰å¹´é¾„èŒƒå›´ã€æ€§åˆ«ã€åˆ›å»ºæ—¶é—´ç­›é€‰
- æœç´¢å†å²è®°å¿†ï¼ˆæœ€è¿‘ 5 æ¬¡ï¼‰

**æŠ€æœ¯å®ç°**:
```typescript
// ä½¿ç”¨ Fuse.js å®ç°æ¨¡ç³Šæœç´¢
import Fuse from 'fuse.js';

const fuse = new Fuse(cases, {
  keys: ['patient_name', 'chief_complaint', 'diagnoses.result'],
  threshold: 0.3, // æ¨¡ç³ŠåŒ¹é…é˜ˆå€¼
  includeScore: true
});

const results = fuse.search(searchQuery);
```

**åç«¯ API å¢å¼º**:
```python
# æ·»åŠ å…¨æ–‡æœç´¢æ”¯æŒ
@router.get("/api/cases/search")
async def search_cases(
    q: str,  # æœç´¢å…³é”®è¯
    age_min: Optional[int] = None,
    age_max: Optional[int] = None,
    gender: Optional[str] = None,
    date_from: Optional[date] = None,
    date_to: Optional[date] = None,
    db: Session = Depends(get_db)
):
    query = db.query(MedicalCase)

    # å…³é”®è¯æœç´¢ï¼ˆä½¿ç”¨ LIKEï¼‰
    if q:
        query = query.filter(
            or_(
                MedicalCase.patient_name.contains(q),
                MedicalCase.chief_complaint.contains(q)
            )
        )

    # å¹´é¾„ç­›é€‰
    if age_min:
        query = query.filter(MedicalCase.age >= age_min)
    if age_max:
        query = query.filter(MedicalCase.age <= age_max)

    # ... å…¶ä»–ç­›é€‰æ¡ä»¶

    return query.all()
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] Ctrl/Cmd + K æ‰“å¼€å…¨å±€æœç´¢
- [ ] å®æ—¶æ˜¾ç¤ºæœç´¢å»ºè®®ï¼ˆè¾“å…¥ 3 ä¸ªå­—ç¬¦åï¼‰
- [ ] æ”¯æŒæ¨¡ç³ŠåŒ¹é…ï¼ˆå®¹é”™æ‹¼å†™ï¼‰
- [ ] é«˜çº§ç­›é€‰å™¨æ­£å¸¸å·¥ä½œ
- [ ] æœç´¢å†å²å¯æŸ¥çœ‹å’Œé‡ç”¨

**é¢„è®¡å·¥æ—¶**: 4 äººæ—¥

---

### 1.4 æ‰¹é‡æ“ä½œä¼˜åŒ– (P2)
**ç”¨æˆ·æ•…äº‹**: ä½œä¸ºç®¡ç†å‘˜ï¼Œæˆ‘å¸Œæœ›æ‰¹é‡ç®¡ç†ç—…ä¾‹ï¼Œæå‡æ“ä½œæ•ˆç‡ã€‚

**åŠŸèƒ½æè¿°**:
- ç—…ä¾‹åˆ—è¡¨æ”¯æŒå¤šé€‰ï¼ˆå¤é€‰æ¡†ï¼‰
- æ‰¹é‡æ“ä½œå·¥å…·æ ï¼šåˆ é™¤ã€å¯¼å‡ºã€æ ‡ç­¾
- æ‰¹é‡åˆ é™¤äºŒæ¬¡ç¡®è®¤ï¼ˆæ˜¾ç¤ºæ•°é‡ï¼‰
- æ‰¹é‡å¯¼å‡ºè¿›åº¦æç¤º
- æ“ä½œæˆåŠŸåæ˜¾ç¤ºç»Ÿè®¡ï¼ˆæˆåŠŸ/å¤±è´¥æ•°é‡ï¼‰

**æŠ€æœ¯å®ç°**:
```typescript
// çŠ¶æ€ç®¡ç†
const [selectedCases, setSelectedCases] = useState<Set<number>>(new Set());

// å…¨é€‰/å–æ¶ˆå…¨é€‰
const handleSelectAll = () => {
  if (selectedCases.size === cases.length) {
    setSelectedCases(new Set());
  } else {
    setSelectedCases(new Set(cases.map(c => c.id)));
  }
};

// æ‰¹é‡åˆ é™¤
const handleBatchDelete = async () => {
  const result = await api.batchDeleteCases(Array.from(selectedCases));
  toast.success(`æˆåŠŸåˆ é™¤ ${result.success} ä¸ªç—…ä¾‹`);
};
```

**åç«¯ API**:
```python
@router.post("/api/cases/batch-delete")
async def batch_delete_cases(
    case_ids: List[int],
    current_user: User = Depends(get_current_user),
    db: Session = Depends(get_db)
):
    deleted_count = 0
    failed_ids = []

    for case_id in case_ids:
        try:
            case = db.query(MedicalCase).filter(MedicalCase.id == case_id).first()
            if case:
                db.delete(case)
                deleted_count += 1
        except Exception as e:
            failed_ids.append(case_id)

    db.commit()

    return {
        "success": deleted_count,
        "failed": len(failed_ids),
        "failed_ids": failed_ids
    }
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç—…ä¾‹åˆ—è¡¨æ˜¾ç¤ºå¤é€‰æ¡†
- [ ] å…¨é€‰/å–æ¶ˆå…¨é€‰åŠŸèƒ½æ­£å¸¸
- [ ] æ‰¹é‡åˆ é™¤æ˜¾ç¤ºç¡®è®¤å¼¹çª—
- [ ] æ‰¹é‡æ“ä½œæ˜¾ç¤ºè¿›åº¦å’Œç»“æœ
- [ ] æ“ä½œå¤±è´¥æä¾›é”™è¯¯è¯¦æƒ…

**é¢„è®¡å·¥æ—¶**: 3 äººæ—¥

---

### 1.5 å¿«æ·é”®æ”¯æŒ (P2)
**ç”¨æˆ·æ•…äº‹**: ä½œä¸ºé«˜é¢‘ç”¨æˆ·ï¼Œæˆ‘å¸Œæœ›ä½¿ç”¨é”®ç›˜å¿«æ·é”®æå‡æ“ä½œæ•ˆç‡ã€‚

**å¿«æ·é”®è§„åˆ’**:
| å¿«æ·é”® | åŠŸèƒ½ | é€‚ç”¨é¡µé¢ |
|--------|------|---------|
| `Ctrl/Cmd + K` | å…¨å±€æœç´¢ | æ‰€æœ‰é¡µé¢ |
| `Ctrl/Cmd + N` | åˆ›å»ºæ–°ç—…ä¾‹ | ç—…ä¾‹åˆ—è¡¨ |
| `Ctrl/Cmd + S` | ä¿å­˜ | ç¼–è¾‘é¡µé¢ |
| `Ctrl/Cmd + Enter` | æäº¤è¡¨å• | è¡¨å•é¡µé¢ |
| `Esc` | å…³é—­å¼¹çª—/å–æ¶ˆæ“ä½œ | æ‰€æœ‰å¼¹çª— |
| `?` | æ˜¾ç¤ºå¿«æ·é”®å¸®åŠ© | æ‰€æœ‰é¡µé¢ |

**æŠ€æœ¯å®ç°**:
```typescript
// ä½¿ç”¨ react-hotkeys-hook
import { useHotkeys } from 'react-hotkeys-hook';

// å…¨å±€æœç´¢
useHotkeys('ctrl+k, cmd+k', (e) => {
  e.preventDefault();
  setSearchOpen(true);
});

// åˆ›å»ºç—…ä¾‹
useHotkeys('ctrl+n, cmd+n', () => {
  navigate('/cases/create');
}, { enableOnFormTags: false });

// æ˜¾ç¤ºå¸®åŠ©
useHotkeys('shift+?', () => {
  setHelpModalOpen(true);
});
```

**å¿«æ·é”®å¸®åŠ©ç•Œé¢**:
- æŒ‰ `?` æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨å¿«æ·é”®
- æŒ‰é¡µé¢åˆ†ç»„æ˜¾ç¤º
- æ”¯æŒæœç´¢å¿«æ·é”®
- å¯è‡ªå®šä¹‰å¿«æ·é”®ï¼ˆæœªæ¥åŠŸèƒ½ï¼‰

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰å¿«æ·é”®æ­£å¸¸å·¥ä½œ
- [ ] å¿«æ·é”®ä¸ä¸æµè§ˆå™¨é»˜è®¤å¿«æ·é”®å†²çª
- [ ] è¡¨å•è¾“å…¥æ—¶ç¦ç”¨éè¡¨å•å¿«æ·é”®
- [ ] å¿«æ·é”®å¸®åŠ©ç•Œé¢æ¸…æ™°æ˜“æ‡‚
- [ ] å¿«æ·é”®æç¤ºæ˜¾ç¤ºåœ¨ç›¸å…³æŒ‰é’®æ—

**é¢„è®¡å·¥æ—¶**: 2 äººæ—¥

---

## âš¡ Phase 2: æ€§èƒ½ä¼˜åŒ– (Sprint 3-4)

### 2.1 å‰ç«¯æ€§èƒ½ä¼˜åŒ– (P1)

#### 2.1.1 ç»„ä»¶æ‡’åŠ è½½
**é—®é¢˜**: é¦–å±åŠ è½½æ—¶é—´è¿‡é•¿ï¼ŒåŠ è½½äº†ä¸å¿…è¦çš„ä»£ç 

**è§£å†³æ–¹æ¡ˆ**:
```typescript
// è·¯ç”±çº§åˆ«æ‡’åŠ è½½
import { lazy, Suspense } from 'react';

const CaseDetail = lazy(() => import('./components/CaseDetail'));
const DiagnosisHistory = lazy(() => import('./components/DiagnosisHistory'));

// è·¯ç”±é…ç½®
<Route
  path="/case/:id"
  element={
    <Suspense fallback={<LoadingSpinner />}>
      <CaseDetail />
    </Suspense>
  }
/>
```

**ä¼˜åŒ–ç›®æ ‡**:
- é¦–å± JavaScript ä½“ç§¯å‡å°‘ 40%
- é¦–å±åŠ è½½æ—¶é—´ < 1 ç§’

---

#### 2.1.2 å›¾ç‰‡ä¼˜åŒ–
**é—®é¢˜**: ç”¨æˆ·å¤´åƒã€æ™ºèƒ½ä½“å›¾æ ‡åŠ è½½æ…¢

**è§£å†³æ–¹æ¡ˆ**:
- ä½¿ç”¨ WebP æ ¼å¼ï¼ˆé™ä½ 30% ä½“ç§¯ï¼‰
- å®ç°å›¾ç‰‡æ‡’åŠ è½½ï¼ˆIntersectionObserverï¼‰
- æ·»åŠ å ä½ç¬¦ï¼ˆBlurHashï¼‰

```typescript
import { LazyLoadImage } from 'react-lazy-load-image-component';

<LazyLoadImage
  src={imageUrl}
  alt="Patient image"
  effect="blur"
  placeholderSrc={placeholderUrl}
/>
```

---

#### 2.1.3 åˆ—è¡¨è™šæ‹ŸåŒ–
**é—®é¢˜**: ç—…ä¾‹åˆ—è¡¨è¿‡å¤šæ—¶æ»šåŠ¨å¡é¡¿

**è§£å†³æ–¹æ¡ˆ**:
```typescript
import { FixedSizeList } from 'react-window';

<FixedSizeList
  height={600}
  itemCount={cases.length}
  itemSize={120}
  width="100%"
>
  {({ index, style }) => (
    <div style={style}>
      <CaseCard case={cases[index]} />
    </div>
  )}
</FixedSizeList>
```

**é€‚ç”¨åœºæ™¯**: ç—…ä¾‹æ•°é‡ > 100 æ—¶å¯ç”¨

---

#### 2.1.4 Bundle åˆ†æä¸ä¼˜åŒ–
**å·¥å…·**: `vite-bundle-visualizer`

**ä¼˜åŒ–é¡¹**:
- ç§»é™¤æœªä½¿ç”¨çš„ä¾èµ–ï¼ˆæ£€æŸ¥ `node_modules`ï¼‰
- Tree Shaking ä¼˜åŒ–ï¼ˆç¡®ä¿æ­£ç¡®å¯¼å…¥ï¼‰
- ç¬¬ä¸‰æ–¹åº“æŒ‰éœ€å¯¼å…¥ï¼ˆå¦‚ lodash â†’ lodash-esï¼‰

```bash
# åˆ†æ bundle å¤§å°
npm run build
npx vite-bundle-visualizer

# ä¼˜åŒ–ç¤ºä¾‹ï¼šæŒ‰éœ€å¯¼å…¥
# ä¹‹å‰
import _ from 'lodash';
_.debounce(fn, 300);

# ä¹‹å
import debounce from 'lodash-es/debounce';
debounce(fn, 300);
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] é¦–å± JS ä½“ç§¯ < 500KB (gzip å)
- [ ] TTI (Time to Interactive) < 2 ç§’
- [ ] Lighthouse æ€§èƒ½åˆ†æ•° > 90

**é¢„è®¡å·¥æ—¶**: 4 äººæ—¥

---

### 2.2 åç«¯æ€§èƒ½ä¼˜åŒ– (P1)

#### 2.2.1 æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–
**é—®é¢˜**: ç—…ä¾‹åˆ—è¡¨æŸ¥è¯¢æ…¢ï¼Œè¯Šæ–­å†å²åŠ è½½æ…¢

**ä¼˜åŒ–æ–¹æ¡ˆ**:

1. **æ·»åŠ ç´¢å¼•**:
```python
# åœ¨ models/case.py ä¸­æ·»åŠ ç´¢å¼•
class MedicalCase(Base):
    __tablename__ = "medical_cases"

    id = Column(Integer, primary_key=True, index=True)
    patient_name = Column(String(50), index=True)  # æ·»åŠ ç´¢å¼•
    created_at = Column(DateTime, default=datetime.utcnow, index=True)  # æ·»åŠ ç´¢å¼•
```

2. **N+1 æŸ¥è¯¢ä¼˜åŒ–**:
```python
# ä½¿ç”¨ joinedload é¢„åŠ è½½å…³è”æ•°æ®
from sqlalchemy.orm import joinedload

cases = db.query(MedicalCase)\
    .options(joinedload(MedicalCase.diagnoses))\
    .all()
```

3. **åˆ†é¡µæŸ¥è¯¢ä¼˜åŒ–**:
```python
# ä½¿ç”¨ offset/limit è€Œé Python åˆ‡ç‰‡
def get_cases_paginated(db: Session, page: int = 1, page_size: int = 9):
    offset = (page - 1) * page_size

    cases = db.query(MedicalCase)\
        .order_by(MedicalCase.created_at.desc())\
        .offset(offset)\
        .limit(page_size)\
        .all()

    total = db.query(MedicalCase).count()

    return {
        "items": cases,
        "total": total,
        "page": page,
        "page_size": page_size,
        "total_pages": (total + page_size - 1) // page_size
    }
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç—…ä¾‹åˆ—è¡¨æŸ¥è¯¢ < 100ms (100 æ¡è®°å½•)
- [ ] ç—…ä¾‹è¯¦æƒ…æŸ¥è¯¢ < 50ms
- [ ] è¯Šæ–­å†å²æŸ¥è¯¢ < 150ms (åŒ…å«å…³è”æ•°æ®)

---

#### 2.2.2 Redis ç¼“å­˜
**é—®é¢˜**: é¢‘ç¹æŸ¥è¯¢ç›¸åŒæ•°æ®ï¼Œæ•°æ®åº“å‹åŠ›å¤§

**ç¼“å­˜ç­–ç•¥**:
```python
import redis
from functools import wraps

redis_client = redis.Redis(host='localhost', port=6379, db=0)

def cache_result(expire_seconds=300):
    def decorator(func):
        @wraps(func)
        async def wrapper(*args, **kwargs):
            # ç”Ÿæˆç¼“å­˜ key
            cache_key = f"{func.__name__}:{hash(str(args))}"

            # å°è¯•ä»ç¼“å­˜è¯»å–
            cached = redis_client.get(cache_key)
            if cached:
                return json.loads(cached)

            # ç¼“å­˜æœªå‘½ä¸­ï¼Œæ‰§è¡Œå‡½æ•°
            result = await func(*args, **kwargs)

            # å†™å…¥ç¼“å­˜
            redis_client.setex(
                cache_key,
                expire_seconds,
                json.dumps(result)
            )

            return result
        return wrapper
    return decorator

# åº”ç”¨ç¼“å­˜
@cache_result(expire_seconds=600)
@router.get("/api/cases")
async def get_cases(db: Session = Depends(get_db)):
    return db.query(MedicalCase).all()
```

**ç¼“å­˜å¤±æ•ˆç­–ç•¥**:
- ç—…ä¾‹åˆ›å»º/æ›´æ–°/åˆ é™¤æ—¶æ¸…é™¤ç›¸å…³ç¼“å­˜
- è¯Šæ–­å®Œæˆåæ¸…é™¤è¯Šæ–­å†å²ç¼“å­˜
- è®¾ç½®åˆç†çš„è¿‡æœŸæ—¶é—´ï¼ˆ5-10åˆ†é’Ÿï¼‰

**éªŒæ”¶æ ‡å‡†**:
- [ ] ç¼“å­˜å‘½ä¸­ç‡ > 60%
- [ ] ç¼“å­˜æŸ¥è¯¢ < 10ms
- [ ] æ•°æ®ä¸€è‡´æ€§ä¿è¯ï¼ˆåŠæ—¶å¤±æ•ˆï¼‰

---

#### 2.2.3 å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—
**é—®é¢˜**: AI è¯Šæ–­ã€æ‰¹é‡å¯¼å‡ºç­‰è€—æ—¶æ“ä½œé˜»å¡ API å“åº”

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨ Celery + Redis

```python
# celery_app.py
from celery import Celery

celery_app = Celery(
    'medical_diagnosis',
    broker='redis://localhost:6379/0',
    backend='redis://localhost:6379/1'
)

# è¯Šæ–­ä»»åŠ¡
@celery_app.task
def run_diagnosis_task(case_id: int, model_name: str):
    # æ‰§è¡Œè¯Šæ–­
    result = run_multi_agent_diagnosis(case_report, model_name)

    # ä¿å­˜ç»“æœåˆ°æ•°æ®åº“
    save_diagnosis_result(case_id, result)

    return {"status": "completed", "case_id": case_id}

# API è·¯ç”±
@router.post("/api/cases/{case_id}/run-diagnosis")
async def run_diagnosis(case_id: int, model: str = "gpt-4"):
    # æäº¤å¼‚æ­¥ä»»åŠ¡
    task = run_diagnosis_task.delay(case_id, model)

    return {
        "task_id": task.id,
        "status": "pending",
        "message": "è¯Šæ–­ä»»åŠ¡å·²æäº¤"
    }

# æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€
@router.get("/api/tasks/{task_id}")
async def get_task_status(task_id: str):
    task = celery_app.AsyncResult(task_id)

    return {
        "task_id": task_id,
        "status": task.status,
        "result": task.result if task.ready() else None
    }
```

**å‰ç«¯è½®è¯¢**:
```typescript
const pollTaskStatus = async (taskId: string) => {
  const interval = setInterval(async () => {
    const status = await api.getTaskStatus(taskId);

    if (status.status === 'SUCCESS') {
      clearInterval(interval);
      // æ›´æ–° UIï¼Œæ˜¾ç¤ºç»“æœ
      loadDiagnosisResult(status.result);
    } else if (status.status === 'FAILURE') {
      clearInterval(interval);
      // æ˜¾ç¤ºé”™è¯¯
      showError(status.result);
    }
  }, 2000); // æ¯ 2 ç§’è½®è¯¢ä¸€æ¬¡
};
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] API å“åº”æ—¶é—´ < 200msï¼ˆè¿”å›ä»»åŠ¡ IDï¼‰
- [ ] ä»»åŠ¡çŠ¶æ€å¯æŸ¥è¯¢
- [ ] ä»»åŠ¡å¤±è´¥å¯é‡è¯•
- [ ] å¹¶å‘å¤„ç†èƒ½åŠ›æå‡ 10 å€

**é¢„è®¡å·¥æ—¶**: 5 äººæ—¥

---

### 2.3 æ•°æ®åº“è¿ç§» (P2)
**é—®é¢˜**: SQLite åœ¨ç”Ÿäº§ç¯å¢ƒæ€§èƒ½å—é™

**è¿ç§»æ–¹æ¡ˆ**: SQLite â†’ PostgreSQL

```bash
# 1. å®‰è£… PostgreSQL é©±åŠ¨
pip install psycopg2-binary

# 2. ä¿®æ”¹æ•°æ®åº“è¿æ¥
# database.py
DATABASE_URL = os.getenv(
    "DATABASE_URL",
    "postgresql://user:password@localhost:5432/medical_diagnosis"
)

# 3. æ•°æ®è¿ç§»
# å¯¼å‡º SQLite æ•°æ®
sqlite3 medical_diagnostics.db .dump > dump.sql

# å¯¼å…¥ PostgreSQL
psql -U user -d medical_diagnosis -f dump.sql
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰æ•°æ®å®Œæ•´è¿ç§»
- [ ] åº”ç”¨ä»£ç æ— éœ€ä¿®æ”¹ï¼ˆORM æŠ½è±¡ï¼‰
- [ ] å¹¶å‘æ€§èƒ½æå‡ 5 å€
- [ ] æ”¯æŒå…¨æ–‡æœç´¢ï¼ˆPostgreSQL FTSï¼‰

**é¢„è®¡å·¥æ—¶**: 3 äººæ—¥

---

## ğŸ“± Phase 3: ç§»åŠ¨ç«¯æ”¯æŒ (Sprint 5-6)

### 3.1 å“åº”å¼è®¾è®¡ (P1)
**ç›®æ ‡**: é€‚é…å¹³æ¿ï¼ˆ768pxï¼‰å’Œæ‰‹æœºï¼ˆ375pxï¼‰

**æ–­ç‚¹è®¾è®¡**:
```css
/* Tailwind æ–­ç‚¹ */
- sm: 640px  (æ‰‹æœºæ¨ªå±)
- md: 768px  (å¹³æ¿)
- lg: 1024px (æ¡Œé¢)
- xl: 1280px (å¤§å±)
```

**å…³é”®é¡µé¢é€‚é…**:

#### ç™»å½•/æ³¨å†Œé¡µ
```tsx
// ç§»åŠ¨ç«¯ï¼šå…¨å±è¡¨å•
<div className="min-h-screen px-4 md:px-8">
  <div className="w-full max-w-md mx-auto">
    {/* è¡¨å•å†…å®¹ */}
  </div>
</div>
```

#### ç—…ä¾‹åˆ—è¡¨
```tsx
// æ¡Œé¢ï¼š3 åˆ—ç½‘æ ¼
// å¹³æ¿ï¼š2 åˆ—ç½‘æ ¼
// æ‰‹æœºï¼š1 åˆ—åˆ—è¡¨
<div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
  {cases.map(case => <CaseCard key={case.id} case={case} />)}
</div>
```

#### ç—…ä¾‹è¯¦æƒ…
```tsx
// æ¡Œé¢ï¼šå·¦å³åˆ†æ 
// ç§»åŠ¨ï¼šå‚ç›´å †å ï¼Œæ ‡ç­¾é¡µåˆ‡æ¢
<div className="flex flex-col lg:flex-row gap-6">
  {/* ç—…ä¾‹å†…å®¹ */}
  <div className="flex-1">...</div>

  {/* è¯Šæ–­æ“ä½œ */}
  <div className="w-full lg:w-96">...</div>
</div>
```

**å¯¼èˆªä¼˜åŒ–**:
- ç§»åŠ¨ç«¯ï¼šæ±‰å ¡èœå•ï¼ˆä¾§è¾¹æ æŠ½å±‰ï¼‰
- å¹³æ¿/æ¡Œé¢ï¼šé¡¶éƒ¨å¯¼èˆªæ 

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰é¡µé¢åœ¨ 375px å®½åº¦æ­£å¸¸æ˜¾ç¤º
- [ ] è§¦æ‘¸æ“ä½œå‹å¥½ï¼ˆæŒ‰é’®è‡³å°‘ 44x44pxï¼‰
- [ ] æ–‡å­—å¯è¯»ï¼ˆæœ€å° 14pxï¼‰
- [ ] æ¨ªå±æ¨¡å¼æ­£å¸¸ä½¿ç”¨

**é¢„è®¡å·¥æ—¶**: 6 äººæ—¥

---

### 3.2 ç§»åŠ¨ç«¯ä¸“å±åŠŸèƒ½ (P2)

#### è¯­éŸ³è¾“å…¥
**åœºæ™¯**: ç§»åŠ¨ç«¯æ‰‹åŠ¨è¾“å…¥ç—…å²ä¸ä¾¿

```typescript
// ä½¿ç”¨ Web Speech API
const SpeechInput: React.FC = () => {
  const [isListening, setIsListening] = useState(false);

  const startListening = () => {
    const recognition = new (window as any).webkitSpeechRecognition();
    recognition.lang = 'zh-CN';

    recognition.onresult = (event: any) => {
      const transcript = event.results[0][0].transcript;
      // å°†æ–‡æœ¬å¡«å…¥è¡¨å•
      setValue('medical_history', transcript);
    };

    recognition.start();
    setIsListening(true);
  };

  return (
    <button onClick={startListening}>
      <Mic className={isListening ? 'text-red-500' : ''} />
    </button>
  );
};
```

#### æ‹ç…§ä¸Šä¼ 
**åœºæ™¯**: ç§»åŠ¨ç«¯ä¸Šä¼ ç—…å†å›¾ç‰‡

```tsx
<input
  type="file"
  accept="image/*"
  capture="environment"  // ç›´æ¥æ‰“å¼€ç›¸æœº
  onChange={handleImageUpload}
/>
```

**é¢„è®¡å·¥æ—¶**: 4 äººæ—¥

---

## ğŸ§ª Phase 4: æµ‹è¯•ä¸è´¨é‡ä¿éšœ (Sprint 7-8)

### 4.1 å•å…ƒæµ‹è¯• (P1)
**ç›®æ ‡**: è¦†ç›–ç‡ > 70%

#### åç«¯æµ‹è¯•
```python
# test_api_cases.py
import pytest
from fastapi.testclient import TestClient
from api.main import app

client = TestClient(app)

def test_create_case():
    response = client.post("/api/cases", json={
        "patient_name": "æµ‹è¯•æ‚£è€…",
        "age": 35,
        "gender": "Male",
        "chief_complaint": "å¤´ç—›3å¤©",
        "medical_history": "æ— ç‰¹æ®Šç—…å²"
    })
    assert response.status_code == 201
    data = response.json()
    assert data["patient_name"] == "æµ‹è¯•æ‚£è€…"

def test_get_cases_pagination():
    response = client.get("/api/cases?page=1&page_size=10")
    assert response.status_code == 200
    data = response.json()
    assert "items" in data
    assert "total" in data
```

#### å‰ç«¯æµ‹è¯•
```typescript
// CaseList.test.tsx
import { render, screen, waitFor } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { CaseList } from './CaseList';

test('renders case list', async () => {
  render(<CaseList />);

  await waitFor(() => {
    expect(screen.getByText('ç—…ä¾‹åˆ—è¡¨')).toBeInTheDocument();
  });
});

test('search functionality', async () => {
  const user = userEvent.setup();
  render(<CaseList />);

  const searchInput = screen.getByPlaceholderText('æœç´¢ç—…ä¾‹');
  await user.type(searchInput, 'å¼ ä¸‰');

  await waitFor(() => {
    expect(screen.getByText('å¼ ä¸‰')).toBeInTheDocument();
  });
});
```

**æµ‹è¯•æ¡†æ¶**:
- åç«¯: pytest + pytest-cov
- å‰ç«¯: Vitest + React Testing Library

**éªŒæ”¶æ ‡å‡†**:
- [ ] åç«¯æ ¸å¿ƒ API æµ‹è¯•è¦†ç›–ç‡ > 80%
- [ ] å‰ç«¯æ ¸å¿ƒç»„ä»¶æµ‹è¯•è¦†ç›–ç‡ > 70%
- [ ] CI/CD é›†æˆï¼Œè‡ªåŠ¨è¿è¡Œæµ‹è¯•

**é¢„è®¡å·¥æ—¶**: 8 äººæ—¥

---

### 4.2 é›†æˆæµ‹è¯• (P2)
**ç›®æ ‡**: ç«¯åˆ°ç«¯æµç¨‹æµ‹è¯•

```typescript
// e2e/diagnosis-flow.spec.ts
import { test, expect } from '@playwright/test';

test('complete diagnosis flow', async ({ page }) => {
  // 1. ç™»å½•
  await page.goto('http://localhost:5173/login');
  await page.fill('input[name="username"]', 'doctor');
  await page.fill('input[name="password"]', 'doctor123');
  await page.click('button[type="submit"]');

  // 2. åˆ›å»ºç—…ä¾‹
  await page.click('text=æ–°å¢ç—…ä¾‹');
  await page.fill('input[name="patient_name"]', 'E2Eæµ‹è¯•æ‚£è€…');
  await page.fill('input[name="age"]', '45');
  await page.click('text=ä¿å­˜');

  // 3. è¿è¡Œè¯Šæ–­
  await page.click('text=å¼€å§‹è¯Šæ–­');
  await page.waitForSelector('text=è¯Šæ–­å®Œæˆ', { timeout: 120000 });

  // 4. éªŒè¯ç»“æœ
  await expect(page.locator('.diagnosis-result')).toBeVisible();

  // 5. å¯¼å‡ºæŠ¥å‘Š
  await page.click('text=å¯¼å‡º');
  await page.click('text=PDF');

  // éªŒè¯ä¸‹è½½
  const download = await page.waitForEvent('download');
  expect(download.suggestedFilename()).toContain('.pdf');
});
```

**é¢„è®¡å·¥æ—¶**: 4 äººæ—¥

---

## ğŸš€ Phase 5: æ™ºèƒ½åŒ–å¢å¼º (Q2 2025)

### 5.1 å¤šæ¨¡æ€è¾“å…¥ (P1)
**åŠŸèƒ½**: ä¸Šä¼ åŒ»å­¦å½±åƒï¼ˆXå…‰ã€CTã€MRIï¼‰è¾…åŠ©è¯Šæ–­

**æŠ€æœ¯æ–¹æ¡ˆ**:
- ä½¿ç”¨ GPT-4V æˆ– Claude 3 çš„è§†è§‰èƒ½åŠ›
- OCR è¯†åˆ«æ£€æŸ¥æŠ¥å‘Šä¸­çš„æ–‡å­—
- å½±åƒå­˜å‚¨ï¼ˆæœ¬åœ°æ–‡ä»¶ç³»ç»Ÿæˆ–å¯¹è±¡å­˜å‚¨ï¼‰

```python
# å¤„ç†å½±åƒè¾“å…¥
@router.post("/api/cases/{case_id}/upload-image")
async def upload_medical_image(
    case_id: int,
    image: UploadFile = File(...),
    image_type: str = Form(...)  # "xray", "ct", "mri"
):
    # ä¿å­˜å›¾ç‰‡
    file_path = f"uploads/{case_id}/{image.filename}"
    with open(file_path, "wb") as f:
        f.write(await image.read())

    # è°ƒç”¨è§†è§‰æ¨¡å‹åˆ†æ
    analysis = await analyze_medical_image(file_path, image_type)

    return {
        "image_url": file_path,
        "analysis": analysis
    }
```

**é¢„è®¡å·¥æ—¶**: 10 äººæ—¥

---

### 5.2 æ™ºèƒ½é—®è¯Š (P1)
**åŠŸèƒ½**: AI ä¸»åŠ¨è¯¢é—®è¡¥å……ä¿¡æ¯ï¼Œæå‡è¯Šæ–­å‡†ç¡®æ€§

**æµç¨‹è®¾è®¡**:
1. ç”¨æˆ·æäº¤ç—…ä¾‹åŸºæœ¬ä¿¡æ¯
2. AI åˆ†æåæå‡º 3-5 ä¸ªé—®é¢˜
3. ç”¨æˆ·å›ç­”é—®é¢˜
4. AI ç»¼åˆæ‰€æœ‰ä¿¡æ¯ç»™å‡ºè¯Šæ–­

**å®ç°ç¤ºä¾‹**:
```python
def generate_follow_up_questions(medical_report: str) -> List[str]:
    prompt = f"""
    Based on the following medical report, generate 3-5 important questions
    that would help in making a more accurate diagnosis:

    {medical_report}

    Questions should be:
    - Specific and relevant
    - Easy for patients to understand
    - Focused on critical missing information
    """

    response = llm.invoke(prompt)
    questions = parse_questions(response)
    return questions
```

**å‰ç«¯äº¤äº’**:
- é—®ç­”å¼ç•Œé¢ï¼ˆå¯¹è¯æ°”æ³¡ï¼‰
- æ”¯æŒå¤šè½®å¯¹è¯
- å¯è·³è¿‡é—®è¯Šï¼Œç›´æ¥è¯Šæ–­

**é¢„è®¡å·¥æ—¶**: 12 äººæ—¥

---

### 5.3 çŸ¥è¯†åº“é›†æˆ (P2)
**åŠŸèƒ½**: é“¾æ¥æƒå¨åŒ»å­¦æ–‡çŒ®å’Œä¸´åºŠæŒ‡å—

**æ•°æ®æº**:
- PubMed åŒ»å­¦è®ºæ–‡
- UpToDate ä¸´åºŠæŒ‡å—
- åŒ»å­¦æ•™ç§‘ä¹¦æ‘˜è¦

**å®ç°æ–¹æ¡ˆ**:
```python
# RAG (Retrieval-Augmented Generation)
from langchain.vectorstores import Chroma
from langchain.embeddings import OpenAIEmbeddings

# æ„å»ºå‘é‡æ•°æ®åº“
embeddings = OpenAIEmbeddings()
vectorstore = Chroma.from_documents(
    documents=medical_knowledge_docs,
    embedding=embeddings
)

# è¯Šæ–­æ—¶æ£€ç´¢ç›¸å…³çŸ¥è¯†
def diagnose_with_knowledge(medical_report: str):
    # æ£€ç´¢ç›¸å…³æ–‡çŒ®
    relevant_docs = vectorstore.similarity_search(medical_report, k=5)

    # æ„å»ºå¢å¼ºçš„ Prompt
    prompt = f"""
    Medical Report: {medical_report}

    Relevant Medical Knowledge:
    {format_docs(relevant_docs)}

    Based on the report and medical knowledge, provide diagnosis...
    """

    return llm.invoke(prompt)
```

**é¢„è®¡å·¥æ—¶**: 15 äººæ—¥

---

## ğŸ¤ Phase 6: åä½œåŠŸèƒ½ (Q3 2025)

### 6.1 å¤šç”¨æˆ·è¯„è®º (P1)
**åŠŸèƒ½**: åŒ»ç”Ÿå¯å¯¹è¯Šæ–­ç»“æœæ·»åŠ è¯„è®ºå’Œæ‰¹æ³¨

```typescript
interface Comment {
  id: number;
  diagnosis_id: number;
  user_id: number;
  content: string;
  created_at: string;
  replies: Comment[];
}

// è¯„è®ºç»„ä»¶
<CommentSection diagnosisId={diagnosis.id}>
  <CommentList comments={comments} />
  <CommentInput onSubmit={handleAddComment} />
</CommentSection>
```

**é¢„è®¡å·¥æ—¶**: 6 äººæ—¥

---

### 6.2 ç—…ä¾‹åˆ†äº« (P2)
**åŠŸèƒ½**: ç”Ÿæˆåˆ†äº«é“¾æ¥ï¼Œä¾›å…¶ä»–ç”¨æˆ·æŸ¥çœ‹

```python
@router.post("/api/cases/{case_id}/share")
async def create_share_link(
    case_id: int,
    expire_hours: int = 24,
    current_user: User = Depends(get_current_user)
):
    # ç”Ÿæˆå”¯ä¸€ token
    share_token = secrets.token_urlsafe(32)

    # å­˜å‚¨åˆ†äº«è®°å½•
    share_record = ShareLink(
        case_id=case_id,
        token=share_token,
        created_by=current_user.id,
        expires_at=datetime.now() + timedelta(hours=expire_hours)
    )
    db.add(share_record)
    db.commit()

    return {
        "share_url": f"https://app.com/shared/{share_token}",
        "expires_at": share_record.expires_at
    }
```

**é¢„è®¡å·¥æ—¶**: 5 äººæ—¥

---

## ğŸŒ Phase 7: å›½é™…åŒ– (Q3 2025)

### 7.1 ä¸­è‹±æ–‡åˆ‡æ¢ (P1)
**æŠ€æœ¯æ–¹æ¡ˆ**: react-i18next

```typescript
// i18n é…ç½®
import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';

i18n
  .use(initReactI18next)
  .init({
    resources: {
      en: { translation: require('./locales/en.json') },
      zh: { translation: require('./locales/zh.json') }
    },
    lng: 'zh',
    fallbackLng: 'en',
    interpolation: { escapeValue: false }
  });

// ä½¿ç”¨
import { useTranslation } from 'react-i18next';

const { t, i18n } = useTranslation();

<button onClick={() => i18n.changeLanguage('en')}>
  {t('common.login')}
</button>
```

**ç¿»è¯‘æ–‡ä»¶**:
```json
// locales/zh.json
{
  "common": {
    "login": "ç™»å½•",
    "register": "æ³¨å†Œ",
    "logout": "é€€å‡º"
  },
  "case": {
    "patient_name": "æ‚£è€…å§“å",
    "age": "å¹´é¾„",
    "gender": "æ€§åˆ«"
  }
}

// locales/en.json
{
  "common": {
    "login": "Login",
    "register": "Register",
    "logout": "Logout"
  },
  "case": {
    "patient_name": "Patient Name",
    "age": "Age",
    "gender": "Gender"
  }
}
```

**é¢„è®¡å·¥æ—¶**: 8 äººæ—¥

---

## ğŸ“ˆ Phase 8: æ•°æ®åˆ†æ (Q4 2025)

### 8.1 ç®¡ç†å‘˜ä»ªè¡¨ç›˜ (P2)
**åŠŸèƒ½**: ç³»ç»Ÿä½¿ç”¨æƒ…å†µå¯è§†åŒ–

**æŒ‡æ ‡**:
- ç”¨æˆ·æ´»è·ƒåº¦ï¼ˆDAU/MAUï¼‰
- ç—…ä¾‹åˆ›å»ºè¶‹åŠ¿
- è¯Šæ–­ä½¿ç”¨é‡ï¼ˆæŒ‰æ¨¡å‹ç»Ÿè®¡ï¼‰
- API è°ƒç”¨é‡å’Œæˆæœ¬
- ç³»ç»Ÿæ€§èƒ½æŒ‡æ ‡

**æŠ€æœ¯æ–¹æ¡ˆ**: Chart.js / Recharts

```typescript
<DashboardCard title="ç”¨æˆ·æ´»è·ƒåº¦">
  <LineChart data={userActivityData}>
    <XAxis dataKey="date" />
    <YAxis />
    <Line type="monotone" dataKey="activeUsers" stroke="#2563eb" />
  </LineChart>
</DashboardCard>
```

**é¢„è®¡å·¥æ—¶**: 10 äººæ—¥

---

## ğŸ”§ æŠ€æœ¯å€ºåŠ¡æ¸…ç†

### å¾…ä¼˜åŒ–é¡¹ (P2)

1. **ä»£ç é‡æ„**
   - æå–é‡å¤ä»£ç ä¸ºå…¬å…±ç»„ä»¶/å‡½æ•°
   - ç»Ÿä¸€é”™è¯¯å¤„ç†é€»è¾‘
   - ä¼˜åŒ–ç»„ä»¶å±‚çº§ï¼ˆå‡å°‘ prop drillingï¼‰

2. **ç±»å‹å®‰å…¨**
   - å‰ç«¯å®Œå–„ TypeScript ç±»å‹å®šä¹‰
   - åç«¯æ·»åŠ  Pydantic æ•°æ®éªŒè¯

3. **æ—¥å¿—ç³»ç»Ÿ**
   - ç»“æ„åŒ–æ—¥å¿—ï¼ˆJSON æ ¼å¼ï¼‰
   - æ—¥å¿—åˆ†çº§ï¼ˆDEBUG/INFO/WARNING/ERRORï¼‰
   - é›†ä¸­å¼æ—¥å¿—æ”¶é›†ï¼ˆELK Stackï¼‰

4. **æ–‡æ¡£å®Œå–„**
   - API æ–‡æ¡£è¡¥å……ç¤ºä¾‹
   - ç»„ä»¶ Storybook
   - éƒ¨ç½²æ–‡æ¡£

**é¢„è®¡å·¥æ—¶**: 15 äººæ—¥

---

## ğŸ“Š è¿›åº¦è·Ÿè¸ª

### å·¥æ—¶ç»Ÿè®¡

| Phase | ä»»åŠ¡æ•° | æ€»å·¥æ—¶ | äººå‘˜éœ€æ±‚ | å®Œæˆæ—¶é—´ |
|-------|--------|--------|---------|---------|
| Phase 1 (UX) | 5 | 14 äººæ—¥ | 2 äºº | 2 å‘¨ |
| Phase 2 (æ€§èƒ½) | 6 | 17 äººæ—¥ | 2 äºº | 2 å‘¨ |
| Phase 3 (ç§»åŠ¨ç«¯) | 2 | 10 äººæ—¥ | 2 äºº | 2 å‘¨ |
| Phase 4 (æµ‹è¯•) | 2 | 12 äººæ—¥ | 2 äºº | 2 å‘¨ |
| Phase 5 (æ™ºèƒ½åŒ–) | 3 | 37 äººæ—¥ | 3 äºº | 4 å‘¨ |
| Phase 6 (åä½œ) | 2 | 11 äººæ—¥ | 2 äºº | 2 å‘¨ |
| Phase 7 (å›½é™…åŒ–) | 1 | 8 äººæ—¥ | 1 äºº | 1 å‘¨ |
| Phase 8 (åˆ†æ) | 1 | 10 äººæ—¥ | 2 äºº | 2 å‘¨ |
| æŠ€æœ¯å€ºåŠ¡ | - | 15 äººæ—¥ | 1 äºº | æŒç»­ |

**æ€»è®¡**: çº¦ 134 äººæ—¥ï¼Œé¢„è®¡ 6-8 ä¸ªæœˆå®Œæˆï¼ˆ2-3 äººå›¢é˜Ÿï¼‰

---

## ğŸ¯ é‡Œç¨‹ç¢‘

### M1: ç”¨æˆ·ä½“éªŒä¼˜åŒ– (2025-02-02)
- âœ… é¦–æ¬¡ç™»å½•å¼•å¯¼
- âœ… è¯Šæ–­ç»“æœå¯¹æ¯”
- âœ… æ™ºèƒ½æœç´¢
- âœ… æ‰¹é‡æ“ä½œ
- âœ… å¿«æ·é”®æ”¯æŒ

### M2: æ€§èƒ½ä¼˜åŒ–å®Œæˆ (2025-03-02)
- âœ… å‰ç«¯åŠ è½½æ—¶é—´ < 1 ç§’
- âœ… API å“åº”æ—¶é—´ < 200ms
- âœ… æ•°æ®åº“è¿ç§»è‡³ PostgreSQL
- âœ… Redis ç¼“å­˜é›†æˆ
- âœ… Celery å¼‚æ­¥ä»»åŠ¡

### M3: ç§»åŠ¨ç«¯å°±ç»ª (2025-04-01)
- âœ… å“åº”å¼è®¾è®¡å®Œæˆ
- âœ… ç§»åŠ¨ç«¯æµ‹è¯•é€šè¿‡
- âœ… è¯­éŸ³è¾“å…¥æ”¯æŒ
- âœ… æ‹ç…§ä¸Šä¼ åŠŸèƒ½

### M4: æ™ºèƒ½åŒ–å¢å¼º (2025-06-01)
- âœ… å¤šæ¨¡æ€è¾“å…¥
- âœ… æ™ºèƒ½é—®è¯Š
- âœ… çŸ¥è¯†åº“é›†æˆ

### M5: åä½œä¸å›½é™…åŒ– (2025-08-01)
- âœ… å¤šç”¨æˆ·è¯„è®º
- âœ… ç—…ä¾‹åˆ†äº«
- âœ… ä¸­è‹±æ–‡åˆ‡æ¢

### M6: æ•°æ®åˆ†æä¸å¹³å°åŒ– (2025-10-01)
- âœ… ç®¡ç†å‘˜ä»ªè¡¨ç›˜
- âœ… API å¼€æ”¾
- âœ… å¤šç§Ÿæˆ·æ”¯æŒ

---

## ğŸš¨ é£é™©ç®¡ç†

### é«˜é£é™©é¡¹

1. **LLM API ç¨³å®šæ€§**
   - é£é™©ï¼šAPI è°ƒç”¨å¤±è´¥ç‡é«˜
   - ç¼“è§£ï¼šé‡è¯•æœºåˆ¶ + å¤šæä¾›å•†æ”¯æŒ + é™çº§ç­–ç•¥

2. **æ€§èƒ½ä¼˜åŒ–æ•ˆæœä¸è¾¾æ ‡**
   - é£é™©ï¼šä¼˜åŒ–åä»æ— æ³•æ»¡è¶³æ€§èƒ½è¦æ±‚
   - ç¼“è§£ï¼šåˆ†é˜¶æ®µéªŒè¯ï¼ŒåŠæ—¶è°ƒæ•´æ–¹æ¡ˆ

3. **ç§»åŠ¨ç«¯å…¼å®¹æ€§é—®é¢˜**
   - é£é™©ï¼šä¸åŒè®¾å¤‡è¡¨ç°ä¸ä¸€è‡´
   - ç¼“è§£ï¼šçœŸæœºæµ‹è¯• + BrowserStack äº‘æµ‹è¯•

### ä¸­é£é™©é¡¹

1. **æŠ€æœ¯é€‰å‹è°ƒæ•´**
   - é£é™©ï¼šå¼•å…¥æ–°æŠ€æœ¯ï¼ˆRedisã€Celeryï¼‰å¢åŠ å¤æ‚åº¦
   - ç¼“è§£ï¼šå……åˆ†è°ƒç ” + POC éªŒè¯ + æ–‡æ¡£å®Œå–„

2. **å›¢é˜Ÿå­¦ä¹ æˆæœ¬**
   - é£é™©ï¼šæ–°æŠ€æœ¯å­¦ä¹ æ—¶é—´é•¿
   - ç¼“è§£ï¼šæŠ€æœ¯åˆ†äº«ä¼š + é…å¯¹ç¼–ç¨‹ + ä»£ç å®¡æŸ¥

---

## ğŸ“ é™„å½•

### å¼€å‘è§„èŒƒ

#### ä»£ç æäº¤è§„èŒƒ
```
<type>(<scope>): <subject>

<body>

<footer>
```

**type**: feat | fix | docs | style | refactor | test | chore
**scope**: å½±å“èŒƒå›´ï¼ˆauth, case, diagnosisï¼‰
**subject**: ç®€çŸ­æè¿°

**ç¤ºä¾‹**:
```
feat(diagnosis): add comparison feature for diagnosis history

- Users can now select 2 diagnoses to compare
- Side-by-side diff view with highlighted differences
- Export comparison result as PDF

Closes #123
```

#### åˆ†æ”¯ç­–ç•¥
- `main`: ç”Ÿäº§ç¯å¢ƒä»£ç 
- `develop`: å¼€å‘ä¸»åˆ†æ”¯
- `feature/*`: åŠŸèƒ½åˆ†æ”¯
- `bugfix/*`: Bug ä¿®å¤åˆ†æ”¯
- `release/*`: å‘å¸ƒåˆ†æ”¯

#### Code Review æ¸…å•
- [ ] ä»£ç ç¬¦åˆè§„èŒƒï¼ˆESLint/Pylint é€šè¿‡ï¼‰
- [ ] åŠŸèƒ½å®Œæ•´å®ç°
- [ ] å•å…ƒæµ‹è¯•é€šè¿‡
- [ ] æ€§èƒ½æµ‹è¯•é€šè¿‡ï¼ˆå¦‚é€‚ç”¨ï¼‰
- [ ] æ–‡æ¡£å·²æ›´æ–°
- [ ] æ— å®‰å…¨æ¼æ´
- [ ] æ— æ˜æ˜¾æŠ€æœ¯å€ºåŠ¡

---

### å‚è€ƒèµ„æ–™

- **æ€§èƒ½ä¼˜åŒ–**: https://web.dev/performance/
- **React æœ€ä½³å®è·µ**: https://react.dev/learn/
- **FastAPI æ€§èƒ½ä¼˜åŒ–**: https://fastapi.tiangolo.com/advanced/
- **PostgreSQL è°ƒä¼˜**: https://wiki.postgresql.org/wiki/Performance_Optimization
- **ç§»åŠ¨ç«¯è®¾è®¡**: https://material.io/design

---

**æ–‡æ¡£çŠ¶æ€**: âœ… å·²å®¡æ ¸
**ä¸‹æ¬¡å®¡æŸ¥**: æ¯æœˆ 1 æ—¥
**è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ
**åé¦ˆæ¸ é“**: GitHub Issues / å›¢é˜Ÿä¾‹ä¼š
